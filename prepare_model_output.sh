#!/bin/bash

wd_path='../wd/'
exp_id=105


########################################################################################
# TUNING AND TESTING RUNS
########################################################################################
caseName='20170305_Zeus'
modelRuns=("17030412" "17030500" "17030512" "17030600" "17030612" "17030700" "17030712")
caseName='20170719_Konvektion'
modelRuns=("17071912")
caseName='20170724_Sommersturm'
modelRuns=("17072312" "17072400" "17072412" "17072500" "17072512")
caseName='20180103_Burglind'
modelRuns=("18010212" "18010300" "18010312")
#modelRuns=("18011512" "18011600" "18011612" "18011700" "18011712" "18011800" "18011812")
#caseName='20180301_Foehntaeler'
#modelRuns=("18022812" "18030100" "18030112")
#caseName='20180429_Foehnsturm'
#modelRuns=("18042812" "18042900" "18042912" "18043000" "18043012")
#caseName='20180503_Bisensturm'
#modelRuns=("18050212" "18050300" "18050312" "18050400" "18050412")
#caseName='20180530_Gewittertage'
#modelRuns=("18052912" "18053000" "18053012" "18053100" "18053112")
#caseName='All'
#modelRuns=("17030412" "17030500" "17030512" "17030600" "17030612" "17030700" "17030712" \
#           "17071912" \
#           "17072312" "17072400" "17072412" "17072500" "17072512" \
#           "18010212" "18010300" "18010312" \
#           "18011512" "18011600" "18011612" "18011700" "18011712" "18011800" "18011812"\
#           "18022812" "18030100" "18030112"\
#           "18042812" "18042900" "18042912" "18043000" "18043012"\
#           "18050212" "18050300" "18050312" "18050400" "18050412"\
#           "18052912" "18053000" "18053012" "18053100" "18053112")
#caseName='June_18'
#modelRuns=("18062012" "18062100" "18062112" "18062200" "18062212" "18062300" "18062312" "18062400" \
#           "18062412" "18062500" "18062512" "18062600" "18062612" "18062700" "18062712" "18062800" \
#           "18062812" "18062900" "18062912" "18063000" "18063012")
#caseName='December_17'
#modelRuns=("17120612" "17120700" "17120712" "17120800" "17120812" "17120900" "17120912" "17121000" \
#           "17121012" "17121100" "17121112" "17121200" "17121212" "17121300" "17121312" "17121400" \
#           "17121412" "17121500" "17121512" "17121600" "17121612")






########################################################################################
# ADDITIONAL RUNS
########################################################################################
## DEBUG
#caseName='DEBUG_Sommer'
#modelRuns=("18061000")
#caseName='December_SMN'
#modelRuns=("17120612" "17120700" "17120712" "17120800" "17120812" "17120900" "17120912" "17121000" \
#           "17121012" "17121100" "17121112" "17121200" "17121212" "17121300" "17121312" "17121400" \
#           "17121412" "17121500" "17121512" "17121600" "17121612")
#caseName='20180103_Burglind_ANAC1'
#modelRuns=("18010212" "18010300" "18010312")

#caseName='20180119_JanuaryDays'
#modelRuns=("18011900" "18011912" "18012000" "18012012" "18012100" "18012112" "18012200"
#            "18012212" "18012300" "18012312" "18012400" "18012412" "18012512"
#            "18012600" "18012612" "18012700" "18012712" "18012800")









for run in "${modelRuns[@]}"
do
	:
	#run="18010212"
    echo $run

    if [ ! -d "$caseName" ]; then
        mkdir "$caseName"
    fi

    lmrun_dir="$caseName/$exp_id"

    if [ ! -d "$lmrun_dir" ]; then
        mkdir "$lmrun_dir"
    fi


    tar -xf ${wd_path}${run}_${exp_id}/debug/lm_tdir.tar

    extractFolder=${wd_path}${run}_${exp_id}/debug/${run}_${exp_id}
    if [ -d "$extractFolder" ]; then
        rm -r $extractFolder
    fi

    mv ${run}_${exp_id} ${wd_path}${run}_${exp_id}/debug/

    outFolder=${lmrun_dir}/20${run}
    echo $outFolder
    if [ ! -d "$outFolder" ]; then
        mkdir "$outFolder"
    fi

    subfolder=$(find ${wd_path}${run}_${exp_id}/debug/${run}_${exp_id}/lm_lm_c_wd_* -maxdepth 0)
    echo $subfolder
    cp $subfolder/fort* $outFolder/

    #exit 1
done


